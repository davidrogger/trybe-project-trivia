(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{32:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},35:function(e,t,n){e.exports=n(56)},45:function(e,t){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),i=n(8),s=n(19),u=n(16),l=n(29),m=n(30),p=n(2),d=function(e){return{type:"CHANGE_COLOR_BTN",colorAnswer:e}},f={name:"",assertions:0,score:0,gravatarEmail:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PLAYER_DATA":var n="https://www.gravatar.com/avatar/".concat(t.hash);return Object(p.a)(Object(p.a)({},e),{},{name:t.playerName,gravatarEmail:n});case"GET_SCORE":return Object(p.a)(Object(p.a)({},e),{},{score:e.score+t.score});case"ADD_CORRECT_ANSWER":return Object(p.a)(Object(p.a)({},e),{},{assertions:e.assertions+1});case"RESET_SCORE":return Object(p.a)(Object(p.a)({},e),{},{score:0});default:return e}},g=n(13),v=n.n(g),h=n(18),E=function(e){return{type:"GET_TOKEN",data:e}},y=function(){var e=Object(h.a)(v.a.mark((function e(t,n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api.php?amount=".concat(n,"&token=").concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log("Erro encontrado Token API: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return t.data.token;case"RESET_TOKEN":return"";default:return e}},j={quantity:5},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return t.type,e},w={questionsData:{},colorAnswer:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_QUESTIONS":return Object(p.a)(Object(p.a)({},e),{},{questionsData:t.data});case"CHANGE_COLOR_BTN":return Object(p.a)(Object(p.a)({},e),{},{colorAnswer:t.colorAnswer});case"RESET_QUESTIONS":return Object(p.a)(Object(p.a)({},e),{},{questionsData:{},colorAnswer:!1});default:return e}},S={count:30,stopTimer:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TIMER":return Object(p.a)(Object(p.a)({},e),{},{count:e.count-1});case"STOP_TIMER":return Object(p.a)(Object(p.a)({},e),{},{stopTimer:!0});case"RESET_TIMER":return Object(p.a)(Object(p.a)({},e),{},{stopTimer:!1,count:30});default:return e}},A=Object(u.combineReducers)({player:b,token:O,settings:k,questions:T,timer:N}),R=Object(u.createStore)(A,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(m.a)));window.Cypress&&(window.store=R);var C=R,_=n(3),x=n(4),I=n(6),q=n(5),P=n(7),D=n(22),H=n(31),B=n.n(H),Q=n(57),M=n(58),G=n(32),L=n.n(G),U=(n(46),function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-container"}," ")}}]),n}(a.Component)),W=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).inputValidation=function(){var e=a.state,t=e.name,n=e.email,r=/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(n),c=t.length;a.setState({disableBtn:!(r&&c)})},a.loadingBtn=function(e){a.setState({login:e})},a.inputHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(D.a)({},n,r),(function(){return a.inputValidation()}))},a.loadingPlayerData=function(){var e=a.props.savePlayerData,t=a.state,n=t.name,r=t.email;e(n,B()(r).toString())},a.playBtn=Object(h.a)(v.a.mark((function e(){var t,n,r,c,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.getNewToken,r=t.savedToken,c=t.quantity,o=t.saveQuestions,i=t.history,a.loadingBtn(!0),e.t0=o,e.t1=r,e.t1){e.next=8;break}return e.next=7,n();case 7:e.t1=e.sent;case 8:return e.t2=e.t1,e.t3=c,e.next=12,(0,e.t0)(e.t2,e.t3);case 12:a.loadingPlayerData(),a.loadingBtn(!1),i.push("/gameboard");case 15:case"end":return e.stop()}}),e)}))),a.settingsBtn=function(){a.props.history.push("/settings")},a.state={name:"",email:"",disableBtn:!0,login:!1},a}return Object(x.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.disableBtn,c=e.login;return r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:L.a,className:"App-logo",alt:"logo"}),r.a.createElement("div",{className:"login-forms"},r.a.createElement("input",{type:"text",name:"name","data-testid":"input-player-name",value:t,placeholder:"Insert Player Name",onChange:this.inputHandler}),r.a.createElement("input",{type:"text",name:"email","data-testid":"input-gravatar-email",value:n,placeholder:"Insert Player E-mail",onChange:this.inputHandler}),r.a.createElement("div",{className:"login-buttons"},r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:a,onClick:this.playBtn},c?r.a.createElement(U,null):r.a.createElement(Q.a,{size:20,weight:"fill"})),r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:this.settingsBtn},r.a.createElement(M.a,{size:20,weight:"fill"})))))}}]),n}(a.Component),J=Object(i.b)((function(e){return{savedToken:e.token,quantity:e.settings.quantity,questions:e.questions.questionsData}}),(function(e){return{getNewToken:function(){return e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,t(E(a)),e.abrupt("return",a.token);case 11:e.prev=11,e.t0=e.catch(0),console.log("Erro encontrado Token API: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())},savePlayerData:function(t,n){return e(function(e,t){return{type:"GET_PLAYER_DATA",playerName:e,hash:t}}(t,n))},saveQuestions:function(t,n){return e(function(e,t){return function(){var n=Object(h.a)(v.a.mark((function n(a){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e,t);case 2:r=n.sent,a({type:"GET_QUESTIONS",data:r});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(W),K=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.img,a=e.score;return r.a.createElement("div",{className:"headerplay-container"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:n,alt:"".concat(t,"-avatar")}),r.a.createElement("p",null,"Player:"," ",r.a.createElement("span",{"data-testid":"header-player-name"},t)),r.a.createElement("p",null,"Score:"," ",r.a.createElement("span",{"data-testid":"header-score"},a)))}}]),n}(a.Component),F=Object(i.b)((function(e){return{name:e.player.name,img:e.player.gravatarEmail,score:e.player.score}}))(K),z=n(23),Y=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){var e;Object(_.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).difficultyHandler=function(e){switch(e){case"hard":return 3;case"medium":return 2;default:return 1}},e.scoreHandler=function(t){var n=e.props,a=n.currentQuestion.difficulty,r=n.sendScore,c=n.timer,o=n.breakTime;if("correctAnswer"===t){r(10+c*e.difficultyHandler(a))}o()},e.answerHandler=function(t){var n=e.props,a=n.updateColor,r=n.correctAnswer;a(!0),"correctAnswer"===t&&r(t),e.scoreHandler(t)},e.answers=function(t,n,a){var c=e.props,o=c.timer,i=c.clickedAnswer;return r.a.createElement("div",{"data-testid":"answer-options",className:"answers-container"},t.map((function(t){var c=a.indexOf(t),s=t===n?"correctAnswer":"incorretAnswer",u=t===n?"correct-answer":"wrong-answer-".concat(c);return r.a.createElement("button",{key:t,type:"button",disabled:0===o,"data-testid":u,className:i?s:"answers-standard-button",onClick:function(){return e.answerHandler(s)}},e.escapeHtml(t))})))},e.escapeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentQuestion,n=t.correct_answer,a=t.incorrect_answers,c=t.category,o=t.question,i=e.shuffleAnswer;return r.a.createElement("div",{className:"question-container"},r.a.createElement("h2",{"data-testid":"question-category"},c),r.a.createElement("h1",{"data-testid":"question-text"},this.escapeHtml(o)),this.answers(i,n,a))}}]),n}(a.Component),V=Object(i.b)((function(e){return{timer:e.timer.count,clickedAnswer:e.questions.colorAnswer}}),(function(e){return{sendScore:function(t){return e(function(e){return{type:"GET_SCORE",score:e}}(t))},breakTime:function(){return e({type:"STOP_TIMER"})},updateColor:function(t){return e(d(t))},correctAnswer:function(t){return e(function(e){return{type:"ADD_CORRECT_ANSWER",answer:e}}(t))}}}))(Y),$=(n(47),function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).answerScrambler=function(){var e=a.props.questions.results.map((function(e){return a.shuffleAnswers(e)}));a.setState({scrambledAnswers:e})},a.nextHandler=function(){var e=a.state.indexPosition,t=a.props,n=t.questions.results,r=t.history,c=t.resetTime,o=t.updateColor;e===n.length-1?r.push("/feedback"):(c(),o(!1),a.setState((function(e){return{indexPosition:e.indexPosition+1}})))},a.shuffleAnswers=function(e){var t=e.correct_answer,n=e.incorrect_answers;return[t].concat(Object(z.a)(n)).sort((function(){return Math.random()-.5}))},a.state={indexPosition:0,scrambledAnswers:[]},a}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.answerScrambler()}},{key:"render",value:function(){var e=this.state,t=e.indexPosition,n=e.scrambledAnswers,a=this.props,c=a.questions.results,o=a.stopTimer,i=c[t],s=n[t];return 0!==n.length&&r.a.createElement("div",{className:"main-container"},r.a.createElement(V,{currentQuestion:i,shuffleAnswer:s}),o&&r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"nextBtn",onClick:this.nextHandler},"Next"))}}]),n}(a.Component)),X=Object(i.b)((function(e){return{questions:e.questions.questionsData,stopTimer:e.timer.stopTimer}}),(function(e){return{resetTime:function(){return e({type:"RESET_TIMER"})},updateColor:function(t){return e(d(t))}}}))($),Z=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).startTimer=function(){var t=setInterval(e.countdown,1e3);e.setState({timerId:t})},e.countdown=function(){var t=e.props,n=t.timer,a=t.changeTimer,r=t.stopTimer,c=t.breakTime,o=e.state.timerId;0===n||r?(clearInterval(o),c(),e.setState({timerId:void 0})):a()},e.state={timerId:void 0},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"componentDidUpdate",value:function(){var e=this.state.timerId;30!==this.props.timer||e||this.startTimer()}},{key:"render",value:function(){var e=this.props.timer;return r.a.createElement("h1",{className:"timer-container"},e)}}]),n}(a.Component),ee=Object(i.b)((function(e){return{timer:e.timer.count,stopTimer:e.timer.stopTimer}}),(function(e){return{changeTimer:function(t){return e(function(e){return{type:"CHANGE_TIMER",time:e}}(t))},breakTime:function(){return e({type:"STOP_TIMER"})}}}))(Z),te=(n(48),function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",{className:"gameboard-container"},r.a.createElement(F,null),r.a.createElement(ee,null),r.a.createElement(X,{history:e}))}}]),n}(a.Component)),ne=n(59),ae=(n(49),function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"settings-container"},r.a.createElement("div",{className:"settings-forms"},r.a.createElement("h1",{"data-testid":"settings-title"},"Settings"),r.a.createElement(ne.a,{className:"settings-ico",size:150}),"Not Implemented yet"))}}]),n}(a.Component)),re=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).getPlayerInfo=function(){var t=e.props,n=t.totalScore,a=t.name,r={image:t.image,name:a,totalScore:n},c=JSON.parse(localStorage.getItem("ranking"))||[];localStorage.setItem("ranking",JSON.stringify([].concat(Object(z.a)(c),[r])))},e.resetStore=function(){var t=e.props,n=t.resetToken,a=t.resetQuestions,r=t.resetScore;n(),a(),r()},e.playAgain=function(){e.resetStore(),e.setState({redirectLogin:!0})},e.goToRanking=function(){e.setState({redirectRanking:!0})},e.state={redirectLogin:!1,redirectRanking:!1},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.getPlayerInfo()}},{key:"render",value:function(){var e=this.props,t=e.correctAnswers,n=e.totalScore,a=this.state,c=a.redirectLogin,o=a.redirectRanking;return r.a.createElement("div",{className:"gameboard-container"},r.a.createElement(F,null),r.a.createElement("div",{className:"main-container"},r.a.createElement("h2",{"data-testid":"feedback-text"},t<3?r.a.createElement(r.a.Fragment,null,"Could be better..."):r.a.createElement(r.a.Fragment,null,"Well Done!")),r.a.createElement("p",null,"You got"," ",r.a.createElement("strong",{"data-testid":"feedback-total-question"},t)," ","questions right."),r.a.createElement("h3",null,"Total Score:"," ",r.a.createElement("strong",{"data-testid":"feedback-total-score"},n)),r.a.createElement("div",{className:"general-buttons"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:this.playAgain},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:this.goToRanking},"Ranking")),c&&r.a.createElement(P.a,{to:"/"}),o&&r.a.createElement(P.a,{to:"/ranking"})))}}]),n}(a.Component),ce=Object(i.b)((function(e){return{correctAnswers:e.player.assertions,totalScore:e.player.score,name:e.player.name,image:e.player.gravatarEmail}}),(function(e){return{resetToken:function(){return e({type:"RESET_TOKEN"})},resetQuestions:function(){return e({type:"RESET_QUESTIONS"})},resetScore:function(){return e({type:"RESET_SCORE"})}}}))(re),oe=function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){var e;return Object(_.a)(this,n),(e=t.call(this)).loadingFinalRanking=function(){var t=JSON.parse(localStorage.getItem("ranking"));t.sort((function(e,t){return t.totalScore-e.totalScore})),e.setState({infoRanking:t})},e.resetStore=function(){var t=e.props,n=t.resetToken,a=t.resetQuestions,r=t.resetScore;n(),a(),r()},e.playAgain=function(){e.resetStore(),e.setState({redirectLogin:!0})},e.state={redirectLogin:!1,infoRanking:[]},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.loadingFinalRanking()}},{key:"render",value:function(){var e=this.state,t=e.redirectLogin,n=e.infoRanking;return r.a.createElement("div",{className:"gameboard-container"},r.a.createElement("h1",{"data-testid":"ranking-title",className:"headerplay-container"},"Ranking"),r.a.createElement("ol",{className:"main-container general-buttons"},n.map((function(e,t){var n=e.image,a=e.name,c=e.totalScore;return r.a.createElement("li",{key:t},r.a.createElement("img",{"data-testid":"input-gravatar-email",src:n,alt:"".concat(a," - Avatar")}),r.a.createElement("span",{className:"name-ranking","data-testid":"player-name-".concat(t)},a),r.a.createElement("strong",{className:"score-ranking","data-testid":"player-score-".concat(t)},c))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:this.playAgain},"Play Again")),t&&r.a.createElement(P.a,{to:"/"}))}}]),n}(a.Component),ie=Object(i.b)(null,(function(e){return{resetToken:function(){return e({type:"RESET_TOKEN"})},resetQuestions:function(){return e({type:"RESET_QUESTIONS"})},resetScore:function(){return e({type:"RESET_SCORE"})}}}))(oe),se=(n(55),function(e){Object(I.a)(n,e);var t=Object(q.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/gameboard",component:te}),r.a.createElement(P.b,{exact:!0,path:"/settings",component:ae}),r.a.createElement(P.b,{exact:!0,path:"/feedback",component:ce}),r.a.createElement(P.b,{exact:!0,path:"/ranking",component:ie}),r.a.createElement(P.b,{exact:!0,path:"/",component:J}))}}]),n}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(i.a,{store:C},r.a.createElement(s.a,{basename:"trybe-project-trivia"},r.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.e5001ad5.chunk.js.map